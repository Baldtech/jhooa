@using Jhooa.UI.Features.Identity.Models
@using Microsoft.EntityFrameworkCore
@using Microsoft.Extensions.Localization

@inject ApplicationDbContext DbContext
@inject IStringLocalizer<Jhooa.UI.Resources.Shared> Loc
@rendermode InteractiveServer

<PaginationComponent TItem="ApplicationUser" Items="_users" DefaultPageSize="15">
    <ChildContentHeader>
        <tr>
            <th>@Loc["EmailAddress"]</th>
            <th>@Loc["FirstName"]</th>
            <th>@Loc["LastName"]</th>
        </tr>
    </ChildContentHeader>
    <ChildContentRow Context="user">
        <tr class="even:bg-jhooa-table-even odd:bg-jhooa-table-odd">
            <td>@user.Email</td>
            <td>@user.FirstName</td>
            <td>@user.LastName</td>
        </tr>
    </ChildContentRow>
</PaginationComponent>

@code {
    private List<ApplicationUser> _users = [];

    protected override async Task OnInitializedAsync()
    {
        _users = await DbContext.Users.Where(u => u.ActivatedAt != null).ToListAsync();
    }

}